{"version":3,"sources":["webpack:////Users/mopip77/project/uniapp/graduation-proj/graduation-proj/main.js","webpack:////Users/mopip77/project/uniapp/graduation-proj/graduation-proj/pages/topic/topic.vue?68bd","webpack:////Users/mopip77/project/uniapp/graduation-proj/graduation-proj/pages/topic/topic.vue?4cca","webpack:////Users/mopip77/project/uniapp/graduation-proj/graduation-proj/pages/topic/topic.vue?dd23","webpack:////Users/mopip77/project/uniapp/graduation-proj/graduation-proj/pages/topic/topic.vue?6058","webpack:////Users/mopip77/project/uniapp/graduation-proj/graduation-proj/pages/topic/topic.vue","webpack:////Users/mopip77/project/uniapp/graduation-proj/graduation-proj/pages/topic/topic.vue?7987","webpack:////Users/mopip77/project/uniapp/graduation-proj/graduation-proj/pages/topic/topic.vue?5859"],"names":["createPage","Page","components","STabs","STab","SingleSubmitPopup","VanNotify","UniLoadMore","Icon","Image","VanDialog","data","refreshOnShow","showNewCommentModal","popupTitle","newSubCommentIdx","favorited","topic","comments","offset","count","onloadingStatus","onloadingText","contentdown","contentrefresh","contentnomore","computed","loginUserId","parseInt","uni","getStorageSync","LSReference","ID","methods","showModal","commendId","userName","type","message","closeModal","loadMore","getComments","goToComment","commentId","navigateTo","url","getTopic","topicId","promise","TopicUtils","then","dateObj","CommonUtils","dateConverter","createGmt","defaultDatetime","reLoadComments","likeTopic","like","id","likeCount","unlikeTopic","likeComment","commentIdx","length","unlikeComment","createComment","content","parentId","deleteTopic","Dialog","confirm","title","p","setTimeout","pages","getCurrentPages","prevPage","$vm","navigateBack","catch","deleteComment","getPageInfo","popupCallBack","splice","forEach","e","dateConverterBatchFormatted","push","favorite","FavoriteUtils","TOPIC_TYPE","unFavorite","closePullDownRefresh","exist","stopPullDownRefresh","onLoad","option","onPullDownRefresh"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;;AAEnB;AACA,6F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,sNAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAk1B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0Ft2B;;;;AAIA;;;;;;;AAOA;AACA;AACA;AACA,yF;;AAEe;;AAEdC,YAAU,EAAE;AACXC,SAAK,EAALA,KADW;AAEXC,QAAI,EAAJA,IAFW;AAGXC,qBAAiB,EAAjBA,iBAHW;AAIX,kBAAcC,SAJH;AAKX,qBAAiBC,WALN;AAMX,gBAAYC,IAND;AAOX,iBAAaC,KAPF;AAQX,kBAAcC,SARH,EAFE;;;AAadC,MAbc,kBAaP;AACN,WAAO;AACNC,mBAAa,EAAE,KADT;;AAGN;AACAC,yBAAmB,EAAE,KAJf;AAKNC,gBAAU,EAAE,EALN;AAMNC,sBAAgB,EAAE,CANZ,EAMe;;AAErBC,eAAS,EAAE,KARL;AASNC,WAAK,EAAE,EATD;;AAWN;AACAC,cAAQ,EAAE,EAZJ;AAaNC,YAAM,EAAE,CAbF;AAcNC,WAAK,EAAE,EAdD;AAeNC,qBAAe,EAAE,MAfX;AAgBNC,mBAAa,EAAE;AACdC,mBAAW,EAAE,UADC;AAEdC,sBAAc,EAAE,QAFF;AAGdC,qBAAa,EAAE,SAHD,EAhBT,EAAP;;;AAsBA,GApCa;;AAsCdC,UAAQ,EAAE;AACTC,eADS,yBACK;AACb,aAAOC,QAAQ,CAACC,GAAG,CAACC,cAAJ,CAAmBC,iCAAYC,EAA/B,CAAD,CAAf;AACA,KAHQ,EAtCI;;;AA4CdC,SAAO,EAAE;AACR;;AAEA;;;;;;AAMAC,aATQ,qBASEC,SATF,EAS4B,KAAfC,QAAe,uEAAJ,EAAI;AACnC,UAAID,SAAS,KAAK,CAAlB,EAAqB;AACpB,aAAKrB,UAAL,GAAkB,MAAlB;AACA,OAFD,MAEO,IAAIqB,SAAS,GAAG,CAAZ,IAAiBC,QAArB,EAA+B;AACrC,aAAKtB,UAAL,GAAkB,UAAUsB,QAA5B;AACA,OAFM,MAEA;AACN,6BAAO;AACNC,cAAI,EAAE,QADA;AAENC,iBAAO,EAAE,UAFH,EAAP;;AAIA;AACA;;AAED,WAAKvB,gBAAL,GAAwBoB,SAAxB;AACA,WAAKtB,mBAAL,GAA2B,IAA3B;AACA,KAxBO;AAyBR0B,cAzBQ,wBAyBK;AACZ,WAAK1B,mBAAL,GAA2B,KAA3B;AACA,KA3BO;AA4BR2B,YA5BQ,sBA4BG;AACV,WAAKC,WAAL;AACA,KA9BO;AA+BRC,eA/BQ,uBA+BIC,SA/BJ,EA+Be;AACtBd,SAAG,CAACe,UAAJ,CAAe;AACdC,WAAG,EAAE,4CAA4CF,SADnC,EAAf;;AAGA,KAnCO;;AAqCR;AACAG,YAtCQ,oBAsCCC,OAtCD,EAsCU;AACjB,UAAIC,OAAO,GAAGC,eAAWH,QAAX,CAAoBC,OAApB,CAAd;AACAC,aAAO;AACLE,UADF,CACO,UAAAvC,IAAI,EAAI;AACb,YAAIwC,OAAO,GAAGC,eAAYC,aAAZ,CAA0B1C,IAAI,CAAC2C,SAA/B,CAAd;AACA,YAAI,SAASH,OAAb,EAAsB;AACrBxC,cAAI,CAAC2C,SAAL,GAAiBH,OAAO,CAACI,eAAzB;AACA;;AAED,aAAI,CAACtC,KAAL,GAAaN,IAAb;;AAEA,aAAI,CAAC6C,cAAL;AACA,OAVF;AAWA,KAnDO;AAoDRC,aApDQ,uBAoDI;AACX,UAAI,KAAKxC,KAAL,CAAWyC,IAAf,EAAqB;AACpB;AACA;;AAED,UAAIV,OAAO,GAAGC,eAAWQ,SAAX,CAAqB,KAAKxC,KAAL,CAAW0C,EAAhC,CAAd;AACAX,aAAO;AACLE,UADF,CACO,YAAM;AACX,cAAI,CAACjC,KAAL,CAAWyC,IAAX,GAAkB,IAAlB;AACA,cAAI,CAACzC,KAAL,CAAW2C,SAAX,IAAwB,CAAxB;AACA,OAJF;AAKA,KA/DO;AAgERC,eAhEQ,yBAgEM;AACb,UAAI,CAAC,KAAK5C,KAAL,CAAWyC,IAAhB,EAAsB;AACrB;AACA;;AAED,UAAIV,OAAO,GAAGC,eAAWY,WAAX,CAAuB,KAAK5C,KAAL,CAAW0C,EAAlC,CAAd;AACAX,aAAO;AACLE,UADF,CACO,YAAM;AACX,cAAI,CAACjC,KAAL,CAAWyC,IAAX,GAAkB,KAAlB;AACA,cAAI,CAACzC,KAAL,CAAW2C,SAAX,IAAwB,CAAxB;AACA,OAJF;AAKA,KA3EO;AA4ERE,eA5EQ,uBA4EIC,UA5EJ,EA4EgB;AACvB,UAAIA,UAAU,IAAI,KAAK7C,QAAL,CAAc8C,MAA5B,IAAsC,KAAK9C,QAAL,CAAc6C,UAAd,EAA0BL,IAApE,EAA0E;AACzE;AACA;;AAED,UAAIV,OAAO,GAAGC,eAAWa,WAAX,CAAuB,KAAK5C,QAAL,CAAc6C,UAAd,EAA0BJ,EAAjD,CAAd;AACAX,aAAO;AACLE,UADF,CACO,YAAM;AACX,cAAI,CAAChC,QAAL,CAAc6C,UAAd,EAA0BL,IAA1B,GAAiC,IAAjC;AACA,cAAI,CAACxC,QAAL,CAAc6C,UAAd,EAA0BH,SAA1B,IAAuC,CAAvC;AACA,OAJF;AAKA,KAvFO;AAwFRK,iBAxFQ,yBAwFMF,UAxFN,EAwFkB;AACzB,UAAIA,UAAU,IAAI,KAAK7C,QAAL,CAAc8C,MAA5B,IAAsC,CAAC,KAAK9C,QAAL,CAAc6C,UAAd,EAA0BL,IAArE,EAA2E;AAC1E;AACA;;AAED,UAAIV,OAAO,GAAGC,eAAWgB,aAAX,CAAyB,KAAK/C,QAAL,CAAc6C,UAAd,EAA0BJ,EAAnD,CAAd;AACAX,aAAO;AACLE,UADF,CACO,YAAM;AACX,cAAI,CAAChC,QAAL,CAAc6C,UAAd,EAA0BL,IAA1B,GAAiC,KAAjC;AACA,cAAI,CAACxC,QAAL,CAAc6C,UAAd,EAA0BH,SAA1B,IAAuC,CAAvC;AACA,OAJF;AAKA,KAnGO;;AAqGRM,iBArGQ,yBAqGMC,OArGN,EAqGeC,QArGf,EAqGyB/B,IArGzB,EAqG+B;AACtC,UAAI,EAAEA,IAAI,KAAK,CAAT,IAAcA,IAAI,KAAK,CAAzB,CAAJ,EAAiC;AAChC,6BAAO;AACNA,cAAI,EAAE,QADA;AAENC,iBAAO,EAAE,QAFH,EAAP;;AAIA;AACA;;AAED,UAAIU,OAAO,GAAGC,eAAWiB,aAAX,CAAyBC,OAAzB,EAAkCC,QAAlC,EAA4C/B,IAA5C,CAAd;AACAW,aAAO;AACLE,UADF,CACO,UAAAvC,IAAI,EAAI;AACb,6BAAO;AACN0B,cAAI,EAAE,SADA;AAENC,iBAAO,EAAE,QAFH,EAAP;;AAIA,OANF;AAOA,aAAOU,OAAP;AACA,KAvHO;;AAyHRqB,eAzHQ,yBAyHM;AACbC,sBAAOC,OAAP,CAAe;AACdC,aAAK,EAAE,MADO;AAEdlC,eAAO,EAAE,QAFK,EAAf;AAGGY,UAHH,CAGQ,YAAM;AACb,YAAIuB,CAAC,GAAGxB,eAAWoB,WAAX,CAAuB,MAAI,CAACpD,KAAL,CAAW0C,EAAlC,CAAR;AACAc,SAAC,CAACvB,IAAF,CAAO,UAAAvC,IAAI,EAAI;AACd,+BAAO;AACN0B,gBAAI,EAAE,SADA;AAENC,mBAAO,EAAE,QAFH,EAAP;;;AAKAoC,oBAAU,CAAC,YAAM;AAChB;AACA,gBAAIC,KAAK,GAAGC,eAAe,EAA3B;AACA,gBAAIC,QAAQ,GAAGF,KAAK,CAACA,KAAK,CAACX,MAAN,GAAe,CAAhB,CAApB;AACAa,oBAAQ,CAACC,GAAT,CAAalE,aAAb,GAA6B,IAA7B;AACAiB,eAAG,CAACkD,YAAJ;AACA,WANS,EAMP,IANO,CAAV;AAOA,SAbD;AAcA,OAnBD,EAmBGC,KAnBH,CAmBS,YAAM,CAAE,CAnBjB;AAoBA,KA9IO;;AAgJRC,iBAhJQ,yBAgJMtC,SAhJN,EAgJiB;AACxB2B,sBAAOC,OAAP,CAAe;AACdC,aAAK,EAAE,MADO;AAEdlC,eAAO,EAAE,QAFK,EAAf;AAGGY,UAHH,CAGQ,YAAM;AACb,YAAIuB,CAAC,GAAGxB,eAAWgC,aAAX,CAAyBtC,SAAzB,CAAR;AACA8B,SAAC,CAACvB,IAAF,CAAO,UAAAvC,IAAI,EAAI;AACd,+BAAO;AACN0B,gBAAI,EAAE,SADA;AAENC,mBAAO,EAAE,QAFH,EAAP;;;AAKA,gBAAI,CAAC4C,WAAL,CAAiB,MAAI,CAACjE,KAAL,CAAW0C,EAA5B;AACA,SAPD;AAQA,OAbD,EAaGqB,KAbH,CAaS,YAAM,CAAE,CAbjB;AAcA,KA/JO;;AAiKR;AACAG,iBAlKQ,yBAkKMhB,OAlKN,EAkKe;AACtB,UAAInB,OAAO,GAAG,IAAd;;AAEA,UAAI,KAAKjC,gBAAT,EAA2B;AAC1B;AACAiC,eAAO,GAAG,KAAKkB,aAAL,CAAmBC,OAAnB,EAA4B,KAAKpD,gBAAjC,EAAmD,CAAnD,CAAV;AACA,OAHD,MAGO;AACN;AACAiC,eAAO,GAAG,KAAKkB,aAAL,CAAmBC,OAAnB,EAA4B,KAAKlD,KAAL,CAAW0C,EAAvC,EAA2C,CAA3C,CAAV;AACA;;AAEDX,aAAO;AACLE,UADF,CACO,YAAM;AACX,cAAI,CAACM,cAAL;AACA,OAHF;AAIA,KAjLO;;AAmLRA,kBAnLQ,4BAmLS;AAChB,WAAKrC,MAAL,GAAc,CAAd;AACA,WAAKD,QAAL,CAAckE,MAAd,CAAqB,CAArB;AACA,WAAK3C,WAAL;AACA,KAvLO;;AAyLRA,eAzLQ,yBAyLM;AACb,UAAI,KAAKtB,MAAL,GAAc,KAAKD,QAAL,CAAc8C,MAAhC,EAAwC;AACvC;AACA;;AAED,WAAK3C,eAAL,GAAuB,SAAvB;;AAEA,UAAI2B,OAAO,GAAGC,eAAWR,WAAX,CAAuB,KAAKxB,KAAL,CAAW0C,EAAlC,EAAsC,CAAtC,EAAyC,KAAKxC,MAA9C,EAAsD,KAAKC,KAA3D,CAAd;AACA4B,aAAO;AACLE,UADF,CACO,UAAAvC,IAAI,EAAI;AACbA,YAAI,CAAC0E,OAAL,CAAa,UAAAC,CAAC,EAAI;AACjBlC,yBAAYmC,2BAAZ,CAAwCD,CAAxC,EAA2C,WAA3C;AACA,SAFD;;AAIA,iCAAI,CAACpE,QAAL,EAAcsE,IAAd,2CAAsB7E,IAAtB;;AAEA;AACA,cAAI,CAACQ,MAAL,IAAe,MAAI,CAACC,KAApB;AACA,cAAI,CAACC,eAAL;AACC,cAAI,CAACF,MAAL,KAAgB,MAAI,CAACD,QAAL,CAAc8C,MAA9B,GAAuC,MAAvC,GAAgD,QADjD;AAEA,OAZF;AAaA,KA9MO;;AAgNRyB,YAhNQ,sBAgNG;AACV,UAAIhB,CAAC,GAAGiB,kBAAcD,QAAd,CAAuBC,kBAAcC,UAArC,EAAiD,KAAK1E,KAAL,CAAW0C,EAA5D,CAAR;AACAc,OAAC,CAACvB,IAAF,CAAO,UAAAvC,IAAI,EAAI;AACd,eAAI,CAACK,SAAL,GAAiB,IAAjB;AACA,OAFD;AAGA,KArNO;;AAuNR4E,cAvNQ,wBAuNK;AACZ,UAAInB,CAAC,GAAGiB,kBAAcE,UAAd,CAAyBF,kBAAcC,UAAvC,EAAmD,KAAK1E,KAAL,CAAW0C,EAA9D,CAAR;AACAc,OAAC,CAACvB,IAAF,CAAO,UAAAvC,IAAI,EAAI;AACd,eAAI,CAACK,SAAL,GAAiB,KAAjB;AACA,OAFD;AAGA,KA5NO;;AA8NRkE,eA9NQ,uBA8NInC,OA9NJ,EA8N2C,wBAA9B8C,oBAA8B,uEAAP,KAAO;AAClD,UAAI9C,OAAJ,EAAa;AACZ,aAAKD,QAAL,CAAcC,OAAd;AACA,YAAI0B,CAAC,GAAGiB,kBAAcI,KAAd,CAAoBJ,kBAAcC,UAAlC,EAA8C5C,OAA9C,CAAR;AACA0B,SAAC,CAACvB,IAAF,CAAO,UAAAvC,IAAI,EAAI;AACd,iBAAI,CAACK,SAAL,GAAiBL,IAAjB;AACA,SAFD;AAGA,OAND,MAMO;AACN,6BAAO;AACN0B,cAAI,EAAE,QADA;AAENC,iBAAO,EAAE,cAFH,EAAP;;AAIA;;AAED,UAAIuD,oBAAJ,EAA0B;AACzBhE,WAAG,CAACkE,mBAAJ;AACA;AACD,KA/OO,EA5CK;;;AA8RdC,QA9Rc,kBA8RPC,MA9RO,EA8RC;AACd,QAAIlD,OAAO,GAAGkD,MAAM,CAAClD,OAArB;AACA,SAAKmC,WAAL,CAAiBnC,OAAjB;AACA,GAjSa;;AAmSdmD,mBAnSc,+BAmSM;AACnB,SAAKhB,WAAL,CAAiB,KAAKjE,KAAL,CAAW0C,EAA5B,EAAgC,IAAhC;AACA,GArSa,E;;;;;;;;;;;;;AC1Gf;AAAA;AAAA;AAAA;AAAuhD,CAAgB,63CAAG,EAAC,C;;;;;;;;;;;ACA3iD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/topic/topic.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/topic/topic.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./topic.vue?vue&type=template&id=75f07fc5&\"\nvar renderjs\nimport script from \"./topic.vue?vue&type=script&lang=js&\"\nexport * from \"./topic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./topic.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/mopip77/project/uniapp/graduation-proj/graduation-proj/pages/topic/topic.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./topic.vue?vue&type=template&id=75f07fc5&\"","var components = {\n  \"uni-load-more\": function() {\n    return import(\n      /* webpackChunkName: \"components/uni-load-more/uni-load-more\" */ \"@/components/uni-load-more/uni-load-more.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./topic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./topic.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport VanNotify from \"@/wxcomponents/vant/dist/notify/index.js\";\nimport Notify from \"@/wxcomponents/vant/dist/notify/notify.js\";\nimport Icon from \"@/wxcomponents/vant/dist/icon/index.js\";\nimport Image from \"@/wxcomponents/vant/dist/image/index.js\";\nimport VanDialog from '@/wxcomponents/vant/dist/dialog/index.js'\nimport Dialog from '@/wxcomponents/vant/dist/dialog/dialog.js'\n\nimport UniLoadMore from \"@/components/uni-load-more/uni-load-more.vue\";\nimport STabs from \"@/components/s-tabs\";\nimport STab from \"@/components/s-tab\";\nimport SingleSubmitPopup from '@/components/SingleSubmitPopup.vue'\n\nimport LSReference from '@/static/js/local_storage_reference.js'\nimport FavoriteUtils from '@/static/js/favorite.js'\nimport TopicUtils from '@/static/js/topic.js'\nimport CommonUtils from '@/static/js/utils.js'\n\nexport default {\n\n\tcomponents: {\n\t\tSTabs,\n\t\tSTab,\n\t\tSingleSubmitPopup,\n\t\t\"van-notify\": VanNotify,\n\t\t\"uni-load-more\": UniLoadMore,\n\t\t\"van-icon\": Icon,\n\t\t\"van-image\": Image,\n\t\t'van-dialog': VanDialog,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\trefreshOnShow: false,\n\n\t\t\t// modal\n\t\t\tshowNewCommentModal: false,\n\t\t\tpopupTitle: '',\n\t\t\tnewSubCommentIdx: 0, // 由于一级评论和子评论公用一个Popup，所以需要一个标志位，如果是评论子评论，那么把该位置为评论id，使用完恢复0\n\n\t\t\tfavorited: false,\n\t\t\ttopic: {},\n\n\t\t\t// comments \n\t\t\tcomments: [],\n\t\t\toffset: 0,\n\t\t\tcount: 10,\n\t\t\tonloadingStatus: \"more\",\n\t\t\tonloadingText: {\n\t\t\t\tcontentdown: \"点击加载更多评论\",\n\t\t\t\tcontentrefresh: \"加载中...\",\n\t\t\t\tcontentnomore: \"没有更多评论了\"\n\t\t\t},\n\t\t};\n\t},\n\n\tcomputed: {\n\t\tloginUserId() {\n\t\t\treturn parseInt(uni.getStorageSync(LSReference.ID))\n\t\t}\n\t},\n\n\tmethods: {\n\t\t// modal\n\n\t\t/**\n\t\t * 显示新建评论的popup\n\t\t * \n\t\t * @param {Number} commendId  如果是一级评论传入0，否则传入子评论id\n\t\t * @param {String} userName  传入被评论者的用户名\n\t\t */\n\t\tshowModal(commendId, userName = '') {\n\t\t\tif (commendId === 0) {\n\t\t\t\tthis.popupTitle = '发表评论'\n\t\t\t} else if (commendId > 0 && userName) {\n\t\t\t\tthis.popupTitle = '评论给: ' + userName\n\t\t\t} else {\n\t\t\t\tNotify({\n\t\t\t\t\ttype: \"danger\",\n\t\t\t\t\tmessage: \"传入评论信息错误\"\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.newSubCommentIdx = commendId\n\t\t\tthis.showNewCommentModal = true\n\t\t},\n\t\tcloseModal() {\n\t\t\tthis.showNewCommentModal = false\n\t\t},\n\t\tloadMore() {\n\t\t\tthis.getComments()\n\t\t},\n\t\tgoToComment(commentId) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '../sub_comments/sub_comments?commentId=' + commentId\n\t\t\t})\n\t\t},\n\n\t\t// logic func\n\t\tgetTopic(topicId) {\n\t\t\tlet promise = TopicUtils.getTopic(topicId)\n\t\t\tpromise\n\t\t\t\t.then(data => {\n\t\t\t\t\tlet dateObj = CommonUtils.dateConverter(data.createGmt);\n\t\t\t\t\tif (null !== dateObj) {\n\t\t\t\t\t\tdata.createGmt = dateObj.defaultDatetime;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.topic = data\n\n\t\t\t\t\tthis.reLoadComments()\n\t\t\t\t})\n\t\t},\n\t\tlikeTopic() {\n\t\t\tif (this.topic.like) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet promise = TopicUtils.likeTopic(this.topic.id)\n\t\t\tpromise\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.topic.like = true\n\t\t\t\t\tthis.topic.likeCount += 1\n\t\t\t\t})\n\t\t},\n\t\tunlikeTopic() {\n\t\t\tif (!this.topic.like) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet promise = TopicUtils.unlikeTopic(this.topic.id)\n\t\t\tpromise\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.topic.like = false\n\t\t\t\t\tthis.topic.likeCount -= 1\n\t\t\t\t})\n\t\t},\n\t\tlikeComment(commentIdx) {\n\t\t\tif (commentIdx >= this.comments.length || this.comments[commentIdx].like) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet promise = TopicUtils.likeComment(this.comments[commentIdx].id)\n\t\t\tpromise\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.comments[commentIdx].like = true\n\t\t\t\t\tthis.comments[commentIdx].likeCount += 1\n\t\t\t\t})\n\t\t},\n\t\tunlikeComment(commentIdx) {\n\t\t\tif (commentIdx >= this.comments.length || !this.comments[commentIdx].like) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet promise = TopicUtils.unlikeComment(this.comments[commentIdx].id)\n\t\t\tpromise\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.comments[commentIdx].like = false\n\t\t\t\t\tthis.comments[commentIdx].likeCount -= 1\n\t\t\t\t})\n\t\t},\n\n\t\tcreateComment(content, parentId, type) {\n\t\t\tif (!(type === 1 || type === 0)) {\n\t\t\t\tNotify({\n\t\t\t\t\ttype: \"danger\",\n\t\t\t\t\tmessage: \"评论类型错误\"\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet promise = TopicUtils.createComment(content, parentId, type)\n\t\t\tpromise\n\t\t\t\t.then(data => {\n\t\t\t\t\tNotify({\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tmessage: \"发表评论成功\"\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\n\t\tdeleteTopic() {\n\t\t\tDialog.confirm({\n\t\t\t\ttitle: '删除帖子',\n\t\t\t\tmessage: '确认删除吗？'\n\t\t\t}).then(() => {\n\t\t\t\tlet p = TopicUtils.deleteTopic(this.topic.id)\n\t\t\t\tp.then(data => {\n\t\t\t\t\tNotify({\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tmessage: \"删除帖子成功\"\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t// 通知前一页需要刷新\n\t\t\t\t\t\tlet pages = getCurrentPages()\n\t\t\t\t\t\tlet prevPage = pages[pages.length - 2];\n\t\t\t\t\t\tprevPage.$vm.refreshOnShow = true;\n\t\t\t\t\t\tuni.navigateBack()\n\t\t\t\t\t}, 1500);\n\t\t\t\t});\n\t\t\t}).catch(() => {});\n\t\t},\n\t\t\n\t\tdeleteComment(commentId) {\n\t\t\tDialog.confirm({\n\t\t\t\ttitle: '删除评论',\n\t\t\t\tmessage: '确认删除吗？'\n\t\t\t}).then(() => {\n\t\t\t\tlet p = TopicUtils.deleteComment(commentId)\n\t\t\t\tp.then(data => {\n\t\t\t\t\tNotify({\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tmessage: \"删除评论成功\"\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.getPageInfo(this.topic.id)\n\t\t\t\t});\n\t\t\t}).catch(() => {});\n\t\t},\n\n\t\t// popup的回调，用于创建评论（一级或子评论）\n\t\tpopupCallBack(content) {\n\t\t\tlet promise = null\n\t\t\t\n\t\t\tif (this.newSubCommentIdx) {\n\t\t\t\t// 子评论\n\t\t\t\tpromise = this.createComment(content, this.newSubCommentIdx, 1)\n\t\t\t} else {\n\t\t\t\t// 一级评论\n\t\t\t\tpromise = this.createComment(content, this.topic.id, 0)\n\t\t\t}\n\n\t\t\tpromise\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.reLoadComments()\n\t\t\t\t})\n\t\t},\n\t\t\n\t\treLoadComments() {\n\t\t\tthis.offset = 0\n\t\t\tthis.comments.splice(0)\n\t\t\tthis.getComments()\n\t\t},\n\n\t\tgetComments() {\n\t\t\tif (this.offset > this.comments.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.onloadingStatus = 'loading';\n\n\t\t\tlet promise = TopicUtils.getComments(this.topic.id, 0, this.offset, this.count)\n\t\t\tpromise\n\t\t\t\t.then(data => {\n\t\t\t\t\tdata.forEach(e => {\n\t\t\t\t\t\tCommonUtils.dateConverterBatchFormatted(e, 'createGmt');\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.comments.push(...data);\n\n\t\t\t\t\t// 更新offset 和 onLoading 类型（是否有更多加载）\n\t\t\t\t\tthis.offset += this.count;\n\t\t\t\t\tthis.onloadingStatus =\n\t\t\t\t\t\tthis.offset === this.comments.length ? \"more\" : \"noMore\";\n\t\t\t\t})\n\t\t},\n\n\t\tfavorite() {\n\t\t\tlet p = FavoriteUtils.favorite(FavoriteUtils.TOPIC_TYPE, this.topic.id)\n\t\t\tp.then(data => {\n\t\t\t\tthis.favorited = true\n\t\t\t})\n\t\t},\n\n\t\tunFavorite() {\n\t\t\tlet p = FavoriteUtils.unFavorite(FavoriteUtils.TOPIC_TYPE, this.topic.id)\n\t\t\tp.then(data => {\n\t\t\t\tthis.favorited = false\n\t\t\t})\n\t\t},\n\t\t\n\t\tgetPageInfo(topicId, closePullDownRefresh = false) {\n\t\t\tif (topicId) {\n\t\t\t\tthis.getTopic(topicId)\n\t\t\t\tlet p = FavoriteUtils.exist(FavoriteUtils.TOPIC_TYPE, topicId)\n\t\t\t\tp.then(data => {\n\t\t\t\t\tthis.favorited = data\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tNotify({\n\t\t\t\t\ttype: \"danger\",\n\t\t\t\t\tmessage: \"未传入帖子号，请刷新重试\"\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif (closePullDownRefresh) {\n\t\t\t\tuni.stopPullDownRefresh()\n\t\t\t}\n\t\t}\n\t},\n\n\tonLoad(option) {\n\t\tlet topicId = option.topicId\n\t\tthis.getPageInfo(topicId)\n\t},\n\t\n\tonPullDownRefresh() {\n\t\tthis.getPageInfo(this.topic.id, true)\n\t}\n}\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./topic.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./topic.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588324248178\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}