<view><view class="on-top"><van-notify class="on-top" vue-id="14d0dce0-1" id="van-notify" bind:__l="__l"></van-notify><van-dialog vue-id="14d0dce0-2" id="van-dialog" bind:__l="__l"></van-dialog></view><block wx:if="{{showNewCommentModal}}"><view class="on-top"><single-submit-popup vue-id="14d0dce0-3" type="textarea" title="{{popupTitle}}" fieldName="评论内容" submitText="评论" data-event-opts="{{[['^closeModal',[['closeModal']]],['^successCallBack',[['popupCallBack']]]]}}" bind:closeModal="__e" bind:successCallBack="__e" bind:__l="__l"></single-submit-popup></view></block><view class="topic-box"><view class="header"><van-image vue-id="14d0dce0-4" round src="{{topic.creator.avatarUrl}}" bind:__l="__l"></van-image><view class="user-info"><view class="creator-name">{{topic.creator.nickname}}</view><view class="create-time">{{topic.createGmt}}</view></view><view class="operation-box"><block wx:if="{{topic.isTeacher||topic.creator.id===loginUserId}}"><view data-event-opts="{{[['tap',[['deleteTopic']]]]}}" class="delete" bindtap="__e">删除</view></block><block wx:if="{{!topic.like}}"><view data-event-opts="{{[['tap',[['likeTopic',['$event']]]]]}}" class="like-count" bindtap="__e"><van-icon vue-id="14d0dce0-5" name="good-job-o" bind:__l="__l"></van-icon><text>{{topic.likeCount}}</text></view></block><block wx:else><view data-event-opts="{{[['tap',[['unlikeTopic',['$event']]]]]}}" class="like-count" bindtap="__e"><van-icon vue-id="14d0dce0-6" name="good-job" color="red" bind:__l="__l"></van-icon><text>{{topic.likeCount}}</text></view></block></view></view><view class="topic-body"><view class="title">{{topic.title}}</view><view class="content"><text>{{topic.content}}</text></view></view><view class="footer"></view></view><view class="comment-box"><block wx:for="{{comments}}" wx:for-item="comment" wx:for-index="idx" wx:key="idx"><view class="comment-item"><view class="header"><van-image vue-id="{{'14d0dce0-7-'+idx}}" round src="{{comment.creator.avatarUrl}}" bind:__l="__l"></van-image><view class="user-info"><view class="creator-name">{{comment.creator.nickname}}</view><view class="create-time">{{comment.createGmt}}</view></view><view class="operation-box"><block wx:if="{{topic.isTeacher||comment.creator.id===loginUserId}}"><view data-event-opts="{{[['tap',[['deleteComment',['$0'],[[['comments','',idx,'id']]]]]]]}}" class="delete" bindtap="__e">删除</view></block><block wx:if="{{!comment.like}}"><view data-event-opts="{{[['tap',[['likeComment',[idx]]]]]}}" class="like-count" bindtap="__e"><van-icon vue-id="{{'14d0dce0-8-'+idx}}" name="good-job-o" bind:__l="__l"></van-icon><text>{{comment.likeCount}}</text></view></block><block wx:else><view data-event-opts="{{[['tap',[['unlikeComment',[idx]]]]]}}" class="like-count" bindtap="__e"><van-icon vue-id="{{'14d0dce0-9-'+idx}}" name="good-job" color="red" bind:__l="__l"></van-icon><text>{{comment.likeCount}}</text></view></block></view></view><view class="comment-body"><text>{{comment.content}}</text></view><view class="sub-comment"><block wx:if="{{comment.commentCount===0}}"><text data-event-opts="{{[['tap',[['showModal',['$0','$1'],[[['comments','',idx,'id']],[['comments','',idx,'creator.nickname']]]]]]]}}" bindtap="__e">回复</text></block><block wx:else><text data-event-opts="{{[['tap',[['goToComment',['$0'],[[['comments','',idx,'id']]]]]]]}}" bindtap="__e">{{"查看"+comment.commentCount+"条回复 >"}}</text></block></view></view></block><uni-load-more vue-id="14d0dce0-10" status="{{onloadingStatus}}" contentText="{{onloadingText}}" data-event-opts="{{[['^clickLoadMore',[['loadMore']]]]}}" bind:clickLoadMore="__e" bind:__l="__l"></uni-load-more></view><view class="dock-row-box"><view class="dock-row"><view data-event-opts="{{[['tap',[['showModal',[0]]]]]}}" class="input-column" bindtap="__e">我有一个大胆的想法...</view><view class="favorite-column"><block wx:if="{{!favorited}}"><van-icon vue-id="14d0dce0-11" name="star-o" data-event-opts="{{[['^tap',[['favorite']]]]}}" bind:tap="__e" bind:__l="__l"></van-icon></block><block wx:else><van-icon vue-id="14d0dce0-12" color="#e74c3c" name="star" data-event-opts="{{[['^tap',[['unFavorite']]]]}}" bind:tap="__e" bind:__l="__l"></van-icon></block></view></view></view></view>